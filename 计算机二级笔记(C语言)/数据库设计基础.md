[TOC]

---

---

# 数据库基本概念

- 数据（Data）是数据库存储的基本对象，是描述事物的符号记录。
- 数据库（DB）是长期储存在计算机内、有组织的、可共享的大量数据的集合，它具有统一的结构形式并存放于统一的存储介质内，是多种应用数据的集成，并可被各个应用程序所共享，所以数据库技术的根本目标是解决数据共享问题。
- 数据库管理系统（DBMS）是数据库的管理机构，负责数据库中的数据组织、数据操纵、数据维护、控制及保护和数据服务等。数据库管理系统是数据库系统的核心。数据库系统包含数据库和数据库管理系统。
- 数据库管理系统的功能：

  - 数据模式定义：即为数据库构建其数据框架；
  - 数据存取的物理构建：为数据模式的物理存取与构建提供有效的存取方法与手段；
  - 数据操纵：为用户使用数据库的数据提供方便，如查询、插入、修改、删除等以及简单的算术运算及统计；
  - 数据的完整性、安全性定义与检查；
  - 数据库的并发控制与故障恢复；
  - 数据的服务：如拷贝、转存、重组、性能监测、分析等。
- 为完成数据库管理系统的功能，数据库管理系统提供相应的数据语言：

  - 数据定义语言（DDL）：负责数据模式定义和数据物理存取构建。

  - 数据操纵语言（DML）：负责数据的操纵。

  - 数据控制语言（DCL）：负责数据完整性，安全性的定义与检查以及并发控制，故障恢复等功能。
  - 数据语言按使用方式具有两个结构形式：交互式命令语言（自含型和自主型语言）和宿主型语言。
- 数据库管理员（DBA）的工作：数据库设计，数据库维护，改善系统性能，提高系统效率。
- 数据库系统（DBS）是指在计算机系统中引入数据库后的系统，一般由数据库、数据库管理系统、应用系统、数据库管理员和用户构成。
- 数据库应用系统（DBAS）是数据库系统再加上应用软件及应用界面这三者所组成，具体包括：数据库、数据库管理系统、数据库管理员、硬件平台、软件平台、应用软件、应用界面。

---

# 数据管理的发展和基本特点

- 数据管理技术的发展经历了三个阶段：人工管理阶段、文件系统阶段和数据库系统阶段，数据独立性最高的阶段是数据库系统阶段。

  - 人工管理阶段的特点：
    - 计算机系统不提供对用户数据的管理功能
    - 数据不能共享
    - 不单独保存数据。
  - 文件系统阶段的缺陷：
    - 数据冗余
    - 不一致性
    - 数据联系弱。
  - 数据库系统发展阶段：
    - 第一代的网状、层次数据库系统；
    - 第二代的关系数据库系统；
    - 第三代的以面向对象模型为主要特征的数据库系统。
  - 数据库系统的基本特点：
    - 数据的高集成性
    - 数据的高共享性和低冗余性
    - 数据高独立性
    - 数据统一管理与控制。

- 数据独立性是数据与程序间的互不依赖性，即数据库中的数据独立于应用程序而不依赖于应用程序。 

  数据的独立性一般分为物理独立性与逻辑独立性两种。 

  - 物理独立性：当数据的物理结构（包括存储结构、存取方式等）改变时，其逻辑结构，应用程序都不用改变。 
  - 逻辑独立性：数据的逻辑结构改变了，如修改数据模式、增加新的数据类型、改变数据间联系等，用户的应用程序可以不变。

---

# 数据系统的内部结构体系

- 数据统系统的三级模式：

  - 概念模式，也称逻辑模式，是对数据库系统中全局数据逻辑结构的描述，是全体用户公共数据视图。一个数据库只有一个概念模式。 
  - 外模式，外模式也称子模式，它是数据库用户能够看见和使用的局部数据的逻辑结构和特征的描述，一个概念模式可以有若干个外模式。 

  - 内模式，内模式又称物理模式，它给出了数据库物理存储结构与物理存取方法。一个数据库只有一个内模式。 
  - （总结）内模式处于最底层，它反映了数据在计算机物理结构中的实际存储形式，概念模式处于中间层，它反映了设计者的数据全局逻辑要求，而外模式处于最外层，它反映了用户对数据的要求。
- 数据库系统的两级映射 ，两级映射保证了数据库系统中数据的独立性。 
  - 概念模式到内模式的映射。该映射给出了概念模式中数据的全局逻辑结构到数据的物理存储结构间的对应关系；
  - 外模式到概念模式的映射。概念模式是一个全局模式而外模式是用户的局部模式。一个概念模式中可以定义多个外模式，而每个外模式是概念模式的一个基本视图。

---

# 数据模型的基本概念

- 数据模型按不同的应用层次分为：

  - 概念数据模型：简称概念模型，是一种面向客观世界，面向用户的模型，不涉及具体的硬件环境和平台也与具体的软件环境无关的模式，它是整个数据模型的基础。
  - 逻辑数据模型：又称数据模型，它是一种面向数据库的模型。分为层次模型，网状模型，关系模型和面向对象模型，其中层次模型和网状模型统称为非关系模型。层次模型用树型结构表示实体之间联系的模型。

  - 物理数据模型：又称物理模型，它是一种面向计算机物理表示的模型

---

# E-R模型

- E-R模型的基本概念：
  - 实体：现实世界中的事物可以抽象成为实体，实体是概念世界中的基本单位，它们是客观存在的且又能相互区别的事物。
  - 属性：现实世界中事物均有一些特性，这些特性可以用属性来表示。
  - 码：唯一标识实体的属性集称为码。
  - 域：属性的取值范围称为该属性的域。
  - 联系：在现实世界中事物间的关联称为联系。
- 两个实体集间的联系实际上是实体集间的函数关系，这种函数关系可以有下面几种：一对一的联系、一对多或多对一联系、多对多。



- E-R模型的图示法
- E-R模型用E-R图来表示，E-R图包含了表示实体集、属性和联系的方法。
  - 实体的表示：用矩形表示实体集，在矩形内写上该实体集的名字。
  - 属性的表示：用椭圆形表示属性，在椭圆形内写上该属性的名称。
  - 联系的表示：用菱形表示联系，菱形内写上联系名。

---

# 层次模型和网状模型

- 层次模型是有根的定向有序树，是数据库系统中最早出现的数据模型。网状模型对应的是有向图。

  层次模型和网状模型各自应满足的条件
  模型名称|满足条件

  模型名称|满足条件
  :--:|:--:
  层次模型|（1）有且只有一个结点没有双亲结点，这个结点称为根结点<br/>（2）根以外的其他结点有且只有一个双亲结点
  网状模型|（1）允许一个以上的结点无双亲<br/>（2）一个结点可以有多于一个的双亲

  

---

# 关系模型及相关概念

​	- 关系模式采用二维表来表示，由关系数据结构，关系操纵和关系完整性约束3部分组成，在关系数据库中，用来表示实体间联系的是关系。

- 关系：一个关系对应一张二维表。一个关系就是一个二维表，但是一个二维表不一定是一个关系。
  - 元组：表中的一行即为一个元组。
  - 属性：表中的一列即为一个属性，给每一个属性起一个名称即属性名。
  - 分量：元组中的一个属性值，是不可分割的基本数据项。
  - 域：属性的取值范围。
- 在二维表中惟一标识元组的最小属性值称为该表的键或码。二维表中可能有若干个健，它们称为表的候选码或候选健。从二维表的所有候选键选取一个作为用户使用的键称为主键或主码。表A中的某属性集是某表B的键，则称该属性值为A的外键或外码。

- 关系操纵：数据查询、数据的删除、数据插入、数据修改。 

- 关系模型允许定义三类数据约束，它们是实体完整性约束、参照完整性约束以及用户定义的完整性约束。其中实体完整性约束、参照完整性约束必须满足的完整性约束条件。参照完整性约束不允许关系应用不存在的元组。实体完整性约束要求关系的主键中属性值不能为空，这是数据库完整性的最基本要求。

---

# 关系代数

- 关系代数是一种抽象的查询语言，关系代数的运算对象是关系，运算结果也是关系。运算对象，运算符和运算结果是运算的三大要素。集合运算符，专门的运算符，算术比较符和逻辑运算符。

- 关系模型的基本运算：（

  - 插入  
  - 删除   
  - 修改  
  - 查询（包括投影、选择、笛卡尔积运算）还有扩充运算交、除、连接及自然连接运算。

- 关系代数的5个基本操作中并，差，交，笛卡尔积是二目运算。

- 设关系R和S具有相同的关系模式

  - 1、并：R和S的并是由属于R或属于S的所有元组构成的集合。
  - 2、差：R和S的差是由属于R但是不属于S的元组构成的集合
  - 3、笛卡尔积：设R和S的元数分别为r和s，R和S的笛卡尔积是一个（r+s）元的元组集合，每个元组的前r个分量来自R的一个元组，后s个分量来自S的一个元组。运算后得到的新表的元组数是R*S，属性是r+s。
  - 4、交：属于R又属于S的元组构成的集合。
   - 5、投影：一元运算，对一个关系进行垂直切割，消去某些列，并重新按排列的顺序。
    - 6、选择：一元运算，根据某些条件对关系进行水平分割。即选择符合条件的元组。
    - 7、除：给定关系R（X，Y）和S（Y，Z），其中X，Y，Z是属性组，R中的Y和S中Y可以有不同的属性名，但必须出自相同的域集。
    - 8、连接：也称θ连接运算，是一种二元运算，它的操作是从两个关系的笛卡尔积中选取属性间满足一定条件的元组，以合并成一个大关系。连接运算包括等值连接和不等值连接。连接运算后得到的新表的属性是运算前表中属性相加。即多于原来关系中属性的个数。
    - 9、自然连接：自然连接满足的条件是（1）两关系间有公共域（2）通过公共域的相等值进行连接。

---

# 数据库设计和管理

- 数据库设计中有两种方法，面向数据的方法和面向过程的方法。

- 面向数据的方法是以信息需求为主，兼顾处理需求；面向过程的方法是以处理需求为主，兼顾信息需求。由于数据在系统中稳定性高，数据已成为系统的核心，因此面向数据的设计方法已成为主流。

- 数据库设计目前一般采用生命周期法，即将整个数据库应用系统的开发分解成目标独立的若干阶段。它们是：需求分析阶段、概念设计阶段、逻辑设计阶段、物理设计阶段。

- 一个低一级范式的关系模式，通过模式分解可以转化为若干个高一级范式的关系模式的集合，这种过程就叫规范化。

- 概念结构设计是将需求分析阶段得到的用户需求抽象为信息结构即概念模型的过程，它是整个数据库设计的关键。

- 逻辑结构设计的任务是将E—R图转换成关系数据模型的过程。

- 数据库的物理结构是指数据库在物理设备上的存储结构和存取方法。它依赖于给定的计算机系统。

- 常用的存取方法：索引方法，聚簇方法和HASH方法。

- 数据库管理的内容：

  - （1）数据库的建立，它是数据库管理的核心，包括数据模式的建立和数据加载。 
  - （2）数据库的重组。
  - （3）数据库安全性控制。
  - （4）数据库的完整性控制，数据库的完整性是指数据的正确性和相容性。
  - （5）数据库的故障恢复。
  - （6）数据库监控。

# 范式

- 第一范式 1NF
  - 定义：数据库表中的字段都是单一属性的，**不课再分**。
- 第二范式 2NF
  - 定义：数据库表中不存在非关键子段对任一候选关键字段的部分函数依赖。**（简单来说就是消除依赖）**
- 第三范式 3NF
  - 定义：在第二范式的基础上，数据表中如果不存在非关键字段对任一候选关键字段的传递函数依赖则符合第三范式。



总结：

​	第一范式：列不能再分；

​	第二范式：建立在第一范式的基础上，消除部分依赖；

​	第三范式：建立在第二范式的基础上，消除值传递。



- 完全函数依赖：
  - 定义：设X,Y是关系R的两个属性集合，X’是X的真子集，存在X→Y，但对每一个X’都有X’!→Y，则称Y完全函数依赖于X。
- 部分函数依赖：
  - 定义：设X,Y是关系R的两个属性集合，存在X→Y，若X’是X的真子集，存在X’→Y，则称Y部分函数依赖于X。
- 传递函数依赖：
  - 设X,Y,Z是关系R中互不相同的属性集合，存在X→Y(Y !→X),Y→Z，则称Z传递函数依赖于X。