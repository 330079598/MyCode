- arch默认已经不在支持MySQL,所以安装的事MariaDB,操作基本相同.

# 1. 安装

```
systemctl stop mysqld    //停止mysql服务
sudo pacman -S mariadb libmariadbclient mariadb-clients    //安装mariadb
sudo mysql_install_db --user=mysql --basedir=/usr --datadir=/var/lib/mysql
```

# 2. 启动

```
systemctl start mariadb
mysql_secure_installation    //设置密码等管理操作
systemctl restart mariadb
```

# 3. 登录

```
mysql -u root -p
```

----

- 另外推荐一款在Linux管理数据库的图形化软件:`Sequel Pro`,用着还不错
- 我错了好么?  Linux下dbeaver用着才是爽好么!!!!!

---

-----

---

- arch安装mysql5.7（个人原因还是要是使用mysql5.7,通过aur安装，但是初始化之后还是遇到问题，登陆不了，经过qq群里的大佬指导过后，才的以解决！）

1. 可以通过aur安装`yay mysql57`,直接安装但是速度有点慢，可以挂代理，速度好很多，如果出现编译错误，可以把代理去掉就可以通过编译了！（我也不知道这个是不是玄学问题。。。。）

   - 也可以直接下载aur的报，然后手动编译运行：

   ```shel
   git clone https://aur.archlinux.org/mysql57.git 
   cd mysql57
   makepkg -s  #速度慢，可以挂代理，编译错误去掉代理即可
   pacman -U *.xz
   cd ..
   rm -rf /mysql57
   ```

   

2. 初始化：

   - 直接使用`mysqld --initialize`不要加参数，它会自动从配置文件中得到路径，如果指定参数，反而会和配置文件中的不一样而出错。
   - 这里说说一下，为什么我的会出错，通过编译安装的会发现`/etc/mysql/my.cnf`中没有写参数，所以可以指定参数，在初始化以前可以看一下这个文件，如果有参数，就执行``mysqld --initialize`，如果没有参数，可以执行安装完成后所给的初始化命令
   - 如果初始化错误，可以把`/var/lib/mysql`中的文件全部删除，再从新初始化即可。

3. 这一步可以启动mysql了，启动时间有点长，不知道是我的配置问题还是本身就是这么长的时间，等待启动完成，可能会报错，但是我们可以查看一下进程，看看是否启动成功`ps aus | grep mysql`,如果出现三个mysql的进程，则证明启动成功，如果只有一个，则说明有问题，我们可以继续进行排查。

   - 可以尝试一下，把`/var/lib/mysql`的属性改为``mysql`的，命令为`chown mysql.mysql /var/run/mysqld`，然后再进行登陆。

   - 如果出现sock文件问题的话，这个可能是文件路径的问题，可以按照我下面所给的文件把`my.cnf`改一下。然后使用`mysql -u root -h 127.0.0.1 -p`密码是你初始化完成后会给你个登陆密码，登陆进去之后，可以修改密码

   - 修改密码：

     1. 方式一：

     ```shell
     mysql> update mysql.user set authentication_string=password('123qwe') where user='root' and Host = 'localhost';
     ```

     2. 方式二：

     ````shell
     mysql> alter user 'root'@'localhost' identified by '123';
     ````

     3. 方式三：

     ```shell
     mysql> set password for 'root'@'localhost'=password('123');
     ```

     4. 最后要刷新权限即可：` flush privileges;`

   我的`my.cnf`配置文件：

   ```shell
   # For advice on how to change settings please see
   # http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html
   # *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
   # *** default location during install, and will be replaced if you
   # *** upgrade to a newer version of MySQL.
   
   [mysqld]
   
   # Remove leading # and set to the amount of RAM for the most important data
   # cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
   # innodb_buffer_pool_size = 128M
   
   # Remove leading # to turn on a very important data integrity option: logging
   # changes to the binary log between backups.
   # log_bin
   
   # These are commonly set, remove the # and set as required.
   basedir = /usr
   datadir = /var/lib/mysql
   port = 3306
   # server_id = .....
   socket = /var/lib/mysql/mysqld.sock
   
   
   [mysql]
   protocol = tcp   # 这一步是为了解决登陆找不到sock文件的问题
   
   [client]
   socket = /var/lib/mysql/mysql.sock
   # Remove leading # to set options mainly useful for reporting servers.
   # The server defaults are faster for transactions and fast SELECTs.
   # Adjust sizes as needed, experiment to find the optimal values.
   # join_buffer_size = 128M
   # sort_buffer_size = 2M
   # read_rnd_buffer_size = 2M 
   
   #sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES
   ```

   